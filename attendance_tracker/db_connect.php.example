<?php
// db_connect.php
// This file contains the database connection details and establishes a connection.

// --- IMPORTANT ---
// UPDATE THE FOLLOWING DETAILS WITH YOUR DATABASE CREDENTIALS
define('DB_SERVER', 'localhost');
define('DB_USERNAME', 'your_db_user');
define('DB_PASSWORD', 'your_db_password');
define('DB_NAME', 'attendance_system');

// Attempt to connect to MySQL database
$conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_NAME);

// Check connection
if ($conn->connect_error) {
    die("ERROR: Could not connect. " . $conn->connect_error);
}

// Start session if not already started
if (session_status() == PHP_SESSION_NONE) {
    session_start();
}

// Include helper files
require_once 'system_helpers.php';
require_once 'audit_helper.php'; // This line requires the file below

// Load application settings into a global variable
$app_settings = load_settings($conn);

// Set timezone from settings
if (!empty($app_settings['timezone'])) {
    date_default_timezone_set($app_settings['timezone']);
}

